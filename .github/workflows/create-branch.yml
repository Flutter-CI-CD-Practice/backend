name: Create Branch
on:
  issues:
    types:
      - opened

jobs:
  create-branch:
    name: Create Branch
    runs-on: ubuntu-latest
    steps:
      - name: Checkout develop code
        uses: actions/checkout@v4
        with:
          ref: develop
          
      - name: Issue Parser
        uses: stefanbuck/github-issue-praser@v3
        id: issue-parser
        with:
          template-path: '.github/ISSUE_TEMPLATE/issue-form.yml'

      - name: Create branch with Ticket number
        run: |
          ISSUE_NUMBER="${{ steps.issue-parser.outputs.issueparser__ticket }}"
          ISSUE_TITLE="${{ steps.issue-parser.outputs.issueparser__branch }}"
          BRANCH_NAME="[${ISSUE_NUMBER}] $(echo ${ISSUE_TITLE} | sed 's/ /-/g')"
          git checkout -b "${BRANCH_NAME}"
          git push origin "${BRANCH_NAME}"
